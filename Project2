#include <stdio.h>
#include <stdlib.h>
int main(int argc, char *argv[]) {
	int size,choice,i,word;
	int contacts=0;
	printf("Which is the size of the contact's book?:"); //Rwtame to megethos toy katalogoy epafwn
	scanf("%d",&size);
	int *name = malloc(sizeof(int) * size);	
	int *lastname = malloc(sizeof(int) * size); //Edw ftiaxnoyme 3 listes me to megethos poy dothike apo ton xrhsth sthn arxh
	int *number = malloc(sizeof(int) * size);
	system("cls");
	while(1){											//Edw arxizei to loop poy tha xrhsimopoioyme gia na xanablepoyme to menoy mexri na epilexei exodo
		printf("1. List all contacts\n\n2. Add new contact\n\n3. Find contact\n\n0. Exit\n\nPlease select (1, 2, 3, 0):"); //ektypwnoyme tiw epiloges kai perimenoyme thn apanthsh toy xrhsth
		scanf("%d",&choice);								
		
		system("cls");
		if (choice==1){							//Saythn thn epilogh ektypwnoyme tis epafes
			if (contacts==0){						//an den exoume kamia to ektyponoyme
				printf("No contacts in contact's book.\n\n");
			}
			else{								//an exoume to ektypwnoyme me to parakatw loop
				for (i=0; i<contacts; i++){
					printf("%d. %d %d %d\n\n", i+1,*(lastname+i),*(name+i),*(number+i));	
				}			
			}
		}
		else if (choice==2){					//Saythn thn epilogh bazoyme mia kainoyria epilogh
			if (contacts<size){				//an exoyme ligoteres epafes apo oti to megethos ths listas pou dothike prwsthetoyme allh mia
				printf("Please enter last name:");
				scanf("%d",(lastname+contacts));
				printf("Please enter first name:");
				scanf("%d",(name+contacts));
				printf("Please enter phone number:");
				scanf("%d",(number+contacts));
				contacts++;
				system("cls");
			}
			else if(contacts==size){			//Alliws ektypwnei oti o katalogos einai gematos
				printf("Contact's book is full!!\n\n");
			}
		}
		else if (choice==3){					//Edv psaxnoyme gia epafes				
			while(1){		
				printf("Do you wish to search by last name(1) or by first name(2):"); //Rwtame pws thelei na psaxei (Last Name//First Name)
				scanf("%d",&choice);			
				if (choice==1||choice==2){
					break;
				}					
				printf("Not a valid answer!\n\n");
			}
				
			if (choice==1){
				printf("Please enter last name:");	
				scanf("%d",&word);							//Meta psaxnoyme analoga ti exei epilexei gia to onoma h epiueto kai ektypwnoyme tiw epafes poy to exoyn. 
				system("cls");													//Exoyn thn idia domh to else if kai to if apla allazei h lista poy psaxnoyme
				for (i=0; i<contacts; i++){
					if (*(lastname+i)==word){
						printf("%d. %d %d %d\n\n", i+1,*(lastname+i),*(name+i),*(number+i));
					}
				}
			}
			else if (choice==2){
				printf("Please enter first name:");
				scanf("%d",&word);
				system("cls");
				for (i=0; i<contacts; i++){
					if (*(name+i)==word){
						printf("%d. %d %d %d\n\n", i+1,*(lastname+i),*(name+i),*(number+i));
					}
				}
			}
		}
		else if (choice==0){							//Saythn thn epilogh bgainoyme apo to loop toy menu kai xrhsimopoioumai to free() giati xrhsimopoihsame to malloc()
			free(name);
			free(lastname);
			free(number);
			break;
		}
		else{
			printf("Not a valid answer!\n\n");
		}
	}
	return 0;
}
