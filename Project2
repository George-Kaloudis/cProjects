#include <stdio.h>
#include <stdlib.h>
int main(int argc, char *argv[]) {
	int arraySize,choice,i,searchWord,count=0;
	printf("Which is the capacity of the phone book?:");
	scanf("%d",&arraySize);
	int *arrayName = malloc(sizeof(int) * arraySize);
	int *arrayLastname = malloc(sizeof(int) * arraySize);
	int *arrayTel = malloc(sizeof(int) * arraySize);
	system("cls");
	while(1){
		printf("1. List all contacts\n\n2. Add new contact\n\n3. Find contact\n\n0. Exit\n\nPlease select (1, 2, 3, 0):");
		scanf("%d",&choice);
		system("cls");
		if (choice==1){
			if (count==0){
				printf("No contacts in phone book.\n\n");
			}
			else{
				for (i=0; i<count; i++){
					printf("%d. %d %d %d\n\n", i+1,*(arrayLastname+i),*(arrayName+i),*(arrayTel+i));	
				}			
			}
		}
		else if (choice==2){
			if (count<arraySize){
				printf("Please enter last name:");
				scanf("%d",(arrayLastname+count));
				printf("Please enter first name:");
				scanf("%d",(arrayName+count));
				printf("Please enter phone number:");
				scanf("%d",(arrayTel+count));
				count++;
				system("cls");
			}
			else if(count==arraySize){
				printf("Phone book is full!!\n\n");
			}
		}
		else if (choice==3){
			do{
				printf("Do you wish to search by last name(1) or by first name(2):");
				scanf("%d",&choice);
				if (choice==1){
					printf("Please enter last name:");
					scanf("%d",&searchWord);
					system("cls");
					for (i=0; i<count; i++){
						if (*(arrayLastname+i)==searchWord){
							printf("%d. %d %d %d\n\n", i+1,*(arrayLastname+i),*(arrayName+i),*(arrayTel+i));
						}
					}
				}
				else if (choice==2){
					printf("Please enter first name:");
					scanf("%d",&searchWord);
					system("cls");
					for (i=0; i<count; i++){
						if (*(arrayName+i)==searchWord){
							printf("%d. %d %d %d\n\n", i+1,*(arrayLastname+i),*(arrayName+i),*(arrayTel+i));
						}
					}
				}
				else{
					printf("Not a valid answer!\n\n");
				}
			}while(choice!=1&&choice!=2);
		}
		else if (choice==0){
			printf("Exiting Phone Book...");
			free(arrayName);
			free(arrayLastname);
			free(arrayTel);
			break;
		}
		else{
			printf("Not a valid answer!\n\n");
		}
	}
	return 0;
}
